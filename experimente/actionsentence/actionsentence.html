<!doctype html>
<html>
  <head>
    <title>My experiment</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <script src="../jspsych.js"></script>
    <script src="../plugins/jspsych-text.js"></script>
	<script src="../plugins/jspsych-single-stim.js"></script>
    <link href="../css/jspsych.css" rel="stylesheet" type="text/css"></link>
  
   <script language="JavaScript">
  function preloader() {
  
	//counter
	var i = 0;
	
	//create object
	imageObj = newImage();
	
	//set image list
	images = newArray();
	images[0] = "7isyes.png";
	images[1] = "7isyesohnehand.png";
	images[2] = "keyboard.gif"
	
	//start preloading
	for(i=0; i<=2, i++) {
		imageObj.src = images[i]
	}

  }
  </script>
  </head>
  <body onLoad="javascript:preloader()">
  </body>
  <script>
  
    // generate a random subject ID
	var subject_id = Math.floor(Math.random()*100000);

    /* define and randomize stimuli */
    var stimuli_raw = ["<p>Ich \u00f6ffne die Schublade.</p>", "<p>Ich dr\u00fccke den Knopf.</p>", "<p>Ich kratze mich am Kopf.</p>", "<p>Ich hebe den Finger.</p>", "<p>Ich schließe die T\u00fcr.</p>", "<p>Ich streichle die Katze.</p>", "<p>Ich Burger den kalt.</p>", "<p>Ich verschr\u00e4nke die Arme.</p>", "<p>Ich ziehe den Hebel.</p>", "<p>Ich glitze den Pork.</p>"];
	
	var stimuli = jsPsych.randomization.repeat(stimuli_raw, 1);
	
		
	var welcome_block = {
      type: "text",
      text: "Herzlich willkommen! Drücke eine beliebige Taste, um fortzufahren."
    };
	
	var instructions_block = {
		type: "text",
		text: "<p>Du wirst gleich 10 Sätze sehen. Bitte versuche für jeden der Sätze möglichst schnell zu entscheiden, ob es sich um einen grammatischen Satz der deutschen Sprache handelt. Bitte lege den Finger zunächst auf die Taste H. Drücke die Taste 7 für 'Ja' und die Leertaste für 'Nein'.</p><p>Drücke eine beliebige Taste, um fortzufahren.</p><img src='7isyes.png'>"
	};
	
	var test_block_0 = {
    type: 'single-stim',
    stimuli: stimuli[0],
    is_html: true,
	choices: [32, 55],
    timing_response: 8000,
    response_ends_trial: true
	};
	var test_block_1 = {
    type: 'single-stim',
    stimuli: stimuli[1],
    is_html: true,
	choices: [32, 55],
    timing_response: 8000,
    response_ends_trial: true
	};
	
		var test_block_2 = {
    type: 'single-stim',
    stimuli: stimuli[2],
    is_html: true,
	choices: [32, 55],
    timing_response: 8000,
    response_ends_trial: true
	};
	
		var test_block_3 = {
    type: 'single-stim',
    stimuli: stimuli[3],
    is_html: true,
	choices: [32, 55],
    timing_response: 8000,
    response_ends_trial: true
	};
	
		var test_block_4 = {
    type: 'single-stim',
    stimuli: stimuli[4],
    is_html: true,
	choices: [32, 55],
    timing_response: 8000,
    response_ends_trial: true
	};
	
		var test_block_5 = {
    type: 'single-stim',
    stimuli: stimuli[5],
    is_html: true,
	choices: [32, 55],
    timing_response: 8000,
    response_ends_trial: true
	};
	
		var test_block_6 = {
    type: 'single-stim',
    stimuli: stimuli[6],
    is_html: true,
	choices: [32, 55],
    timing_response: 8000,
    response_ends_trial: true
	};
	
		var test_block_7 = {
    type: 'single-stim',
    stimuli: stimuli[7],
    is_html: true,
	choices: [32, 55],
    timing_response: 8000,
    response_ends_trial: true
	};
	
		var test_block_8 = {
    type: 'single-stim',
    stimuli: stimuli[8],
    is_html: true,
	choices: [32, 55],
    timing_response: 8000,
    response_ends_trial: true
	};
	
		var test_block_9 = {
    type: 'single-stim',
    stimuli: stimuli[9],
    is_html: true,
	choices: [32, 55],
    timing_response: 8000,
    response_ends_trial: true
	};
	
		var test_block_10 = {
    type: 'single-stim',
    stimuli: stimuli[10],
    is_html: true,
	choices: [32, 55],
    timing_response: 8000,
    response_ends_trial: true
	};
		
	var start_block = {
      type: "text",
      text: "<p>Bitte lege den Finger nun auf das H. Dr\u00fccke H, um fortzufahren.</p> <img src='keyboard.gif'>",
	  cont_key: "h"
    };
	
	var ausprobier_block = {
      type: "text",
      text: "<p>Zuerst eine kurze Proberunde. Dr\u00fccke H, um fortzufahren. Denke daran: 7 = JA, Leertaste = NEIN.</p> <img src='keyboard.gif'>",
	  cont_key: "h"
    };
	
	var end_block = {
      type: "text",
      text: "Vielen Dank! Bitte drücke nun noch eine beliebige Taste, damit deine Daten gespeichert werden.",
	  cont_key: []
    };
	
	var ausprobier_block2 = {
    type: 'single-stim',
    stimuli: "<p><strong>Jopsel bin kein Horgrögel.</strong></p><p>Ist dies ein grammatischer Satz der deutschen Sprache? Wenn JA, dann 7; wenn NEIN, dann LEERTASTE. (Diesen Hinweis wirst du bei den weiteren S\u00e4tzen nicht mehr bekommen.)</p><img src='7isyesohnehand.png'>",
    is_html: true,
	choices: [32, 55],
    timing_response: 15000,
    response_ends_trial: true
	};
	
	var intermission_block = {
      type: "text",
      text: "<p>Bitte lege den Finger wieder auf das H. Dr\u00fccke H, um fortzufahren. Denke daran: 7 = JA, Leertaste = NEIN.</p> <img src='keyboard.gif'>",
	  cont_key: "h"
    };
	
	/*save data*/
		function saveData(filename, filedata){
           $.ajax({
              type:'post',
              cache: false,
              url: 'save_data.php',
              data: {filename: filename, filedata: filedata}
           });
        } 
		
	 /*filename*/
	var str = "actionsentence";
	var str1 = ".csv"
		
    /* create experiment definition array */
    var experiment = [];
    experiment.push(welcome_block); experiment.push(instructions_block); experiment.push(ausprobier_block); experiment.push(ausprobier_block2); experiment.push(start_block); experiment.push(test_block_0); experiment.push(intermission_block); experiment.push(test_block_1); experiment.push(intermission_block); experiment.push(test_block_2); experiment.push(intermission_block); experiment.push(test_block_3); experiment.push(intermission_block); experiment.push(test_block_4); experiment.push(intermission_block); experiment.push(test_block_5); experiment.push(intermission_block); experiment.push(test_block_6); experiment.push(intermission_block); experiment.push(test_block_7); experiment.push(intermission_block); experiment.push(test_block_8); experiment.push(intermission_block); experiment.push(test_block_9); experiment.push(end_block)

	
    /* start the experiment */
  jsPsych.init({
    experiment_structure: experiment,
	on_finish: function(data){ 
		saveData(str.concat(subject_id, str1), jsPsych.data.dataAsCSV()) 
	}
  });
  </script>
</html>
